<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Friend Finder</title>
    <script src="https://code.jquery.com/jquery.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
     <!-- Compiled and minified CSS -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

     <!-- Compiled and minified JavaScript -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
     <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        body {
            background-image: url("/images/dust_scratches.png")
        }

        .modal {
            width: auto !important;
            right: auto !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
        }

    </style>
             

</head>
  
<body>

    <div class="container">

        <!-- Modal Trigger -->
        <!-- <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a> -->

        <!-- Modal Structure -->                 
       <div id="modal1" class="modal">
            <div class="modal-content">
                <div class="card">
                    <div class="card-content" id="modalBody">
                        
                    </div>                                
                    <div class="card-image" id="modalImage">
                            
                    </div>
                </div>
            </div>
        </div>

        <!--Form-->
        <div>
            <h2 class="teal-text lighten-2"><i class="fas fa-user-friends"></i> Survey Questions</h2>
        </div>

        <div class="row">
            <form class="col s12">
                <h5 class="teal-text lighten-4">About You</h5>  
                <div class="row">
                    <div class="input-field col s12">
                        <input id="name" type="text" class="validate">
                        <label for="name">Name</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="photo" type="text" class="validate">
                        <label for="photo">Link to Photo Image (Required</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <h5 class="teal-text lighten-4">Questions</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question1">
                            <option value="" disabled selected>I have a vivid imagination.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question One:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question2">
                            <option value="" disabled selected>I love large parties.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Two:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question3">
                            <option value="" disabled selected>I prefer variety to routine.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Three:</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question4">
                            <option value="" disabled selected>I like to solve complex problems.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Four:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question5">
                            <option value="" disabled selected>I dislike being the center of attention.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Five:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question6">
                            <option value="" disabled selected>I try to follow the rules.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Six:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question7">
                            <option value="" disabled selected>I seek adventure</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Seven:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question8">
                            <option value="" disabled selected>I value cooperation over competition.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Eight:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question9">
                            <option value="" disabled selected>I believe that others have good intentions.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Nine:</label>
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col s12">
                        <select id="question10">
                            <option value="" disabled selected>I can't stand confrontations.</option>
                            <option value="1">1 Strongly Disagree</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 Strongly Agree</option>
                        </select>
                        <label>Question Ten:</label>
                    </div>
                </div> 

                
                <div>
                    <button class="btn waves-effect waves-light" id="submit" type="submit" name="action">Submit
                        <i class="material-icons right">send</i>
                    </button>
                </div> 

            </form>
        </div>

        <div>
            
            <a href="/api/friends" target="_blank">API Friends List |</a>
            <a href="https://github.com/mnelson13/friend-finder" target="_blank">GitHub Repo |</a>
            <a href="/" target="_blank">Home</a>
            <hr>
        </div>

    </div>

    <script type="text/javascript">

        $(document).ready(function(){
                
            $('select').formSelect();
    
            $("#submit").on("click", function(event){
                $("#modalBody").empty();
                $("#modalImage").empty();

                event.preventDefault();

                let newFriend = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#question1").val().trim().charAt(0),
                        $("#question2").val().trim().charAt(0),
                        $("#question3").val().trim().charAt(0),
                        $("#question4").val().trim().charAt(0),
                        $("#question5").val().trim().charAt(0),
                        $("#question6").val().trim().charAt(0),
                        $("#question7").val().trim().charAt(0),
                        $("#question8").val().trim().charAt(0),
                        $("#question9").val().trim().charAt(0),
                        $("#question10").val().trim().charAt(0),
                    ]
                };

                $.post("/api/friends", newFriend)
                    .then(function(data){
                        console.log(data);

                        $("#modalBody").append("<h5> Your best match: " + data.name + "</h5>");
                        $("#modalImage").append("<img class='responsive-img' src='" + data.photo + "' alt='" + data.name + " picture' />");

                        $('#modal1').modal(); 
                        $("#modal1").modal('open');

                    }
                );
            });
        });

    </script>
    
</body>
</html>